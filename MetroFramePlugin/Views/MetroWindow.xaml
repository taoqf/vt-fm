<Window x:Class="MetroFramePlugin.Views.MetroWindow"
        xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
        xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
        xmlns:i="clr-namespace:System.Windows.Interactivity;assembly=System.Windows.Interactivity"
        xmlns:vm="clr-namespace:MetroFramePlugin.ViewModels"
        xmlns:controls="clr-namespace:Victop.Wpf.Controls;assembly=Victop.Wpf.Controls"
        xmlns:local="clr-namespace:MetroFramePlugin"
        Name="mainWindow" Style="{DynamicResource ShadowWindow}">
    <Window.Resources>
        <local:ImgeNameToBackgroundConverter x:Key="imgeNameToBackgroundConverter"/>
    </Window.Resources>
    <Window.DataContext>
        <vm:UCMetroWindowViewModel/>
    </Window.DataContext>
    <DockPanel LastChildFill="True">
        <ScrollViewer x:Name="scrollViewer" Width="70" Style="{DynamicResource MenuScrollViewer}">
            <Grid Style="{DynamicResource LeftGrid}">
                <StackPanel>
                    <Image Style="{DynamicResource logoImage}" />
                    <Grid  Margin="0,20,0,0" Width="42" Height="42" Background="{DynamicResource Logo}"  HorizontalAlignment="Center" VerticalAlignment="Center" />                   
                    <Border Background="{DynamicResource SecondMenuItemNormalBorderBrush}" Width="46" Height="1" HorizontalAlignment="Center" Margin="0,17,0,0"/>
                    <Border Background="{DynamicResource SecondMenuItemNormalBorderDropColor}" Width="46" Height="1" HorizontalAlignment="Center"/>
                    <Expander Header="项目名称" Style="{DynamicResource ExpanderFirstLevel}" IsExpanded="True">
                        <ListBox x:Name="listSecondMenuLocal" Style="{DynamicResource ListBoxSecondLevelMenu}" SelectedItem="{Binding SelectedSecondMenuModel}" ItemsSource="{Binding SystemMenuListLocal,UpdateSourceTrigger=PropertyChanged}">
                        </ListBox>
                    </Expander>
                </StackPanel>
            </Grid>
        </ScrollViewer>
        <Grid Name="gridMain">
            <Grid.RowDefinitions>
                <RowDefinition RowDefinition.Height="68"/>
                <RowDefinition RowDefinition.Height="*"/>
            </Grid.RowDefinitions>
            <Grid Name="gridTitle" Grid.Row="0"  Grid.Column="1">
                <!--Width="260"-->
                <StackPanel Orientation="Horizontal" Style="{DynamicResource MainFrmUserStackPanelStyle}">
                    <Grid Name="gridSearch"  Style="{DynamicResource MainFrmSearchGridStyle}">
                        <Grid.ColumnDefinitions>
                            <ColumnDefinition/>
                            <ColumnDefinition Width="30"/>
                        </Grid.ColumnDefinitions>
                        <controls:VicTextBoxNormal  Grid.Column="0"  WaterMark="  搜索" Style="{DynamicResource MainFrmSearchBoxStyle}"/>
                        <Grid Grid.Column="1" Height="30" VerticalAlignment="Center" HorizontalAlignment="Center">
                            <Path  Margin="6" Data="M13.5,7 C13.5,10.589851 10.589851,13.5 7,13.5 C3.4101491,13.5 0.5,10.589851 0.5,7 C0.5,3.4101491 3.4101491,0.5 7,0.5 C10.589851,0.5 13.5,3.4101491 13.5,7 z M12,12 L20,20"  RenderTransformOrigin="0.493073170731708,0.37970731707317" Stroke="#333333"/>
                        </Grid>
                    </Grid>
                    <controls:VicButtonImage Name="btnUserLogin" Background="{Binding UserImg, Converter={StaticResource imgeNameToBackgroundConverter}}"
                                         Style="{DynamicResource MainFrmUserPictrueGridStyle}" Command="{Binding btnUserLoginClickCommand}">
                    </controls:VicButtonImage>
                    <controls:VicTextBlockNormal Visibility="Collapsed" Text="{Binding UserName}" Style="{DynamicResource MainFrmUserName}"/>
                    <controls:VicTextBlockNormal Text="{Binding UserName}" Style="{DynamicResource MainFrmUserName}"/>
                </StackPanel>
                <StackPanel Margin="0,10,0,0" Orientation="Horizontal" HorizontalAlignment="Right" VerticalAlignment="Top">
                    <!--<Button Name="btnFeedBack" Width="34"  Height="34" Style="{DynamicResource btnMainFeedBackStyle}"/>-->
                    <!--插件集合-->
                    <controls:VicButtonNormal Name="btnPluginList" Style="{DynamicResource btnActivePluginStyle}" ToolTip="窗体切换">
                        <i:Interaction.Triggers>
                            <i:EventTrigger EventName="MouseEnter">
                                <i:InvokeCommandAction Command="{Binding btnPluginListMouseEnterCommand}"/>
                            </i:EventTrigger>
                        </i:Interaction.Triggers>
                    </controls:VicButtonNormal>
                    <controls:VicButtonNormal Name="btnChangeSkin" Style="{DynamicResource btnChangeSkinStyle}"  ToolTip="皮肤管理">
                        <i:Interaction.Triggers>
                            <i:EventTrigger EventName="Click">
                                <i:InvokeCommandAction Command="{Binding btnChangeSkinClickCommand}"/>
                            </i:EventTrigger>
                        </i:Interaction.Triggers>
                    </controls:VicButtonNormal>
                    <controls:VicButtonNormal Name="btnSet" Visibility="Collapsed" Style="{DynamicResource btnSetStyle}" >
                        <i:Interaction.Triggers>
                            <i:EventTrigger EventName="Click">
                                <i:InvokeCommandAction Command="{Binding btnSetClickCommand}"/>
                            </i:EventTrigger>
                        </i:Interaction.Triggers>
                    </controls:VicButtonNormal>
                    <controls:VicButtonNormal Name="btnMini" Style="{DynamicResource btnMiniStyle}" ToolTip="最小化">
                        <i:Interaction.Triggers>
                            <i:EventTrigger EventName="Click">
                                <i:InvokeCommandAction Command="{Binding btnMiniClickCommand}"/>
                            </i:EventTrigger>
                        </i:Interaction.Triggers>
                    </controls:VicButtonNormal>
                    <controls:VicButtonNormal Name="btnMax" Style="{DynamicResource btnRestoreStyle}" ToolTip="最大化/还原">
                        <i:Interaction.Triggers>
                            <i:EventTrigger EventName="Click">
                                <i:InvokeCommandAction Command="{Binding btnMaxClickCommand}" CommandParameter="{Binding ElementName=btnMax}"/>
                            </i:EventTrigger>
                        </i:Interaction.Triggers>
                    </controls:VicButtonNormal>

                    <controls:VicButtonNormal Name="btnClose" Style="{DynamicResource btnCloseStyle}" ToolTip="关闭">
                        <i:Interaction.Triggers>
                            <i:EventTrigger EventName="Click">
                                <i:InvokeCommandAction Command="{Binding btnCloseClickCommand}"/>
                            </i:EventTrigger>
                        </i:Interaction.Triggers>
                    </controls:VicButtonNormal>
                </StackPanel>
            </Grid>
            <Grid Name="gridMid" Grid.Column="1" Grid.Row="1">
                <Grid.ColumnDefinitions>
                    <ColumnDefinition ColumnDefinition.Width="0" />
                    <ColumnDefinition ColumnDefinition.Width="*" />
                </Grid.ColumnDefinitions>
                <StackPanel Width="10" Grid.Column="0" VerticalAlignment="Center">
                    <controls:VicButtonNormal Name="btnStretch" Height="70" Width="10" Style="{DynamicResource btnStretchStyle}" Margin="-3,0,-4,0"></controls:VicButtonNormal>
                </StackPanel>
                <Grid Grid.Column="1">
                    <controls:VicTabControlNormal Name="MainTabControl" Style="{DynamicResource MainVicTabControlStyle}" ItemsSource="{Binding TabItemList}" SelectedItem="{Binding SelectedTabItem}">
                        <i:Interaction.Triggers>
                            <i:EventTrigger EventName="TabItemClosing">
                                <i:InvokeCommandAction Command="{Binding tbctrlTabItemClosingCommand}"/>
                            </i:EventTrigger>
                        </i:Interaction.Triggers>
                    </controls:VicTabControlNormal>
                </Grid>
            </Grid>
            <!--<Label Name="tb"  Content="当前软件已是最新版本（2014-04-23）" Style="{DynamicResource MainFrmBottomGridStyle}"/>-->
        </Grid>
    </DockPanel>
    <i:Interaction.Triggers>
        <i:EventTrigger EventName="Loaded">
            <i:InvokeCommandAction Command="{Binding gridMainLoadedCommand}"  CommandParameter="{Binding ElementName=mainWindow}"/>
        </i:EventTrigger>
    </i:Interaction.Triggers>
</Window>
