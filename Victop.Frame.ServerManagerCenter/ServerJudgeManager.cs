//------------------------------------------------------------------------------
// <auto-generated>
//     此代码由工具生成
//     如果重新生成代码，将丢失对此文件所做的更改。
// </auto-generated>
//------------------------------------------------------------------------------
namespace Victop.Frame.ServerManagerCenter
{
    using System;
    using System.Collections.Generic;
    using System.Linq;
    using System.Text;
    using Victop.Frame.CoreLibrary.Models;
    using Victop.Frame.CoreLibrary;
    using Victop.Frame.CoreLibrary.Enums;

	/// <summary>
	/// 服务判定器
	/// </summary>
	/// <remarks>服务判定器(强制路由)</remarks>
	public class ServerJudgeManager
	{
		/// <summary>
		/// 判定服务
		/// </summary>
		public virtual bool JudgeServerInfo(RequestMessage messageInfo,out RegisterServerInfo serverInfo)
		{
            RegisterServerInfo registerServerInfo = CheckServerList(messageInfo);
            if (registerServerInfo != null)
            {
                serverInfo = registerServerInfo;
                return true;
            }
            else
            {
                serverInfo = new RegisterServerInfo() { ServerType = ServerTypeEnum.SERVER };
                return true;
            }

		}

		/// <summary>
		/// 检查注册服务列表
		/// </summary>
        private RegisterServerInfo CheckServerList(RequestMessage messageInfo)
		{
            RegisterServerManager registerServerManager = new RegisterServerManager();
            return registerServerManager.GetServer(GalleryManager.GetCurrentGalleryId().ToString(), messageInfo.MessageType);
		}

	}
}

